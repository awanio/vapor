# Storage Management

Vapor provides comprehensive storage management capabilities including disk management, LVM support, RAID configuration, iSCSI, multipath, and BTRFS management.

## Navigating to Storage Management

1.  From the main menu, click on **Storage**.

## Storage Sections

The storage interface is organized into multiple sections:

### Disks

The **Disks** section displays all storage devices on the system.

#### Viewing Disk Information

For each disk, you can see:
*   Device name (e.g., /dev/sda)
*   Vendor and model
*   Size
*   Partition table type
*   Mount status
*   Serial number

#### Disk Actions

For each disk, you can:
*   **Format**: Create a new filesystem on the disk
*   **Partition**: Manage disk partitions
*   **Mount/Unmount**: Mount or unmount filesystems
*   **Check Health**: View SMART data and disk health status

### LVM (Logical Volume Manager)

LVM provides flexible disk management by abstracting physical storage.

#### Volume Groups

View and manage volume groups:
*   Create new volume groups
*   Extend existing volume groups
*   View usage and available space

#### Logical Volumes

Manage logical volumes:
*   Create new logical volumes
*   Resize existing volumes
*   Delete unused volumes
*   Format and mount logical volumes

#### Physical Volumes

Manage physical volumes:
*   Initialize disks for LVM use
*   Add physical volumes to volume groups
*   Remove physical volumes

### RAID Management

Configure and manage software RAID arrays.

#### Creating a RAID Array

1.  Click **Create RAID** button
2.  Select RAID level (0, 1, 5, 6, 10)
3.  Choose disks to include in the array
4.  Set array name and options
5.  Click **Create**

#### Managing RAID Arrays

For existing arrays, you can:
*   View array status and health
*   Add or remove disks
*   Rebuild degraded arrays
*   Monitor synchronization progress

### iSCSI

Connect to remote storage using iSCSI protocol.

#### Discovering iSCSI Targets

1.  Click **Discover Targets**
2.  Enter the IP address of the iSCSI server
3.  Optional: Enter authentication credentials
4.  Click **Discover**

#### Connecting to iSCSI Targets

1.  Select a discovered target
2.  Click **Connect**
3.  Configure authentication if required
4.  The iSCSI disk will appear in the Disks section

### Multipath

Manage multipath devices for redundant storage connections.

#### Viewing Multipath Devices

The multipath section shows:
*   Device mapper name
*   WWN identifier
*   Number of paths
*   Active/failed paths
*   Path status

### BTRFS

Manage BTRFS filesystems and features.

#### Subvolumes

*   Create new subvolumes
*   Delete existing subvolumes
*   Set default subvolume
*   View subvolume quotas

#### Snapshots

*   Create filesystem snapshots
*   Restore from snapshots
*   Delete old snapshots
*   Schedule automatic snapshots

## Best Practices

1.  **Regular Backups**: Always backup important data before making storage changes
2.  **Monitor Disk Health**: Regularly check SMART data for early failure detection
3.  **Plan LVM Layout**: Design your volume group and logical volume structure before implementation
4.  **RAID Considerations**: Choose appropriate RAID levels based on performance and redundancy needs
5.  **iSCSI Security**: Use CHAP authentication for iSCSI connections
6.  **Multipath Configuration**: Ensure proper multipath configuration for high availability

## Troubleshooting

### Disk Not Visible

*   Check if the disk is properly connected
*   Rescan SCSI bus: Click **Rescan Devices**
*   Check system logs for hardware errors

### LVM Issues

*   Volume group not activating: Check if all physical volumes are available
*   Cannot extend volume: Ensure sufficient free space in volume group

### RAID Problems

*   Degraded array: Replace failed disk and rebuild
*   Slow performance: Check for ongoing resync operations

### iSCSI Connection Failed

*   Verify network connectivity to iSCSI target
*   Check authentication credentials
*   Ensure iSCSI initiator service is running
