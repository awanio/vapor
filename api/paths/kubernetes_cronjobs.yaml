get:
  summary: List all cron jobs in the cluster
  description: List all cron jobs across all namespaces in the Kubernetes cluster
  tags:
    - Kubernetes
  security:
    - bearerAuth: []
  responses:
    '200':
      description: Cron jobs listed successfully
      content:
        application/json:
          schema:
            $ref: ../components/schemas/CronJobsResponse.yaml
    '401':
      $ref: ../components/responses/UnauthorizedError.yaml
    '503':
      $ref: ../components/responses/KubernetesNotInstalledError.yaml

post:
  summary: Create or update a cron job
  description: |
    Create or update a cron job in the Kubernetes cluster using apply semantics.
    If the cron job doesn't exist, it will be created. If it exists, it will be updated.
    
    Supports both JSON and YAML formats. If Content-Type is not specified, defaults to JSON.
  tags:
    - Kubernetes
  security:
    - bearerAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: ../components/schemas/CronJobDetail.yaml
        example:
          apiVersion: batch/v1
          kind: CronJob
          metadata:
            name: hello
            namespace: default
          spec:
            schedule: "*/1 * * * *"
            jobTemplate:
              spec:
                template:
                  spec:
                    containers:
                    - name: hello
                      image: busybox:1.28
                      command:
                      - /bin/sh
                      - -c
                      - date; echo Hello from the Kubernetes cluster
                    restartPolicy: OnFailure
      application/yaml:
        schema:
          type: string
        example: |
          apiVersion: batch/v1
          kind: CronJob
          metadata:
            name: hello
            namespace: default
          spec:
            schedule: "*/1 * * * *"
            jobTemplate:
              spec:
                template:
                  spec:
                    containers:
                    - name: hello
                      image: busybox:1.28
                      command:
                      - /bin/sh
                      - -c
                      - date; echo Hello from the Kubernetes cluster
                    restartPolicy: OnFailure
      text/yaml:
        schema:
          type: string
  responses:
    '200':
      description: Cron job created or updated successfully
      content:
        application/json:
          schema:
            $ref: ../components/schemas/CronJobDetailResponse.yaml
    '400':
      description: Bad request - Invalid YAML/JSON format or missing required fields
      content:
        application/json:
          schema:
            $ref: ../components/schemas/ErrorResponse.yaml
          examples:
            invalidYaml:
              summary: Invalid YAML format
              value:
                status: error
                message: Failed to parse YAML
                details: 'yaml: line 5: found character that cannot start any token'
            invalidJson:
              summary: Invalid JSON format
              value:
                status: error
                message: Failed to parse JSON
                details: 'unexpected end of JSON input'
            unsupportedContentType:
              summary: Unsupported content type
              value:
                status: error
                message: Unsupported Content-Type
                details: "Content-Type must be 'application/json', 'application/yaml', or 'text/yaml'"
            missingField:
              summary: Missing required field
              value:
                status: error
                message: Validation error
                details: 'CronJob name is required in metadata.name'
    '401':
      $ref: ../components/responses/UnauthorizedError.yaml
    '503':
      $ref: ../components/responses/KubernetesNotInstalledError.yaml
