patch:
  summary: Rollback DaemonSet to previous revision
  description: |
    Rollback a DaemonSet to its previous revision.
    
    This operation retrieves the previous revision from the DaemonSet's 
    ControllerRevisions and updates the DaemonSet to use the pod template 
    from that previous revision. The rollback triggers a rolling update to 
    replace current pods with pods from the previous configuration.
    
    This is equivalent to running:
    ```bash
    kubectl rollout undo daemonset/{name} -n {namespace}
    ```
    
    **Note:** This operation requires at least one previous revision to exist.
    DaemonSets use ControllerRevisions to track their history.
  tags:
    - Kubernetes
  security:
    - bearerAuth: []
  parameters:
    - name: namespace
      in: path
      required: true
      description: DaemonSet namespace
      schema:
        type: string
      example: kube-system
    - name: name
      in: path
      required: true
      description: DaemonSet name
      schema:
        type: string
      example: fluentd
  responses:
    '200':
      description: DaemonSet rolled back successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              message:
                type: string
                example: "DaemonSet kube-system/fluentd has been rolled back to revision 2"
              daemonset:
                $ref: ../components/schemas/DaemonSetDetail.yaml
    '400':
      description: No previous revision available
      content:
        application/json:
          schema:
            $ref: ../components/schemas/ErrorResponse.yaml
          example:
            success: false
            error:
              code: "BAD_REQUEST"
              message: "No previous revision available"
              details: "The DaemonSet has no previous revision to rollback to"
    '401':
      $ref: ../components/responses/UnauthorizedError.yaml
    '404':
      description: DaemonSet not found
      content:
        application/json:
          schema:
            $ref: ../components/schemas/ErrorResponse.yaml
    '500':
      description: Failed to rollback DaemonSet
      content:
        application/json:
          schema:
            $ref: ../components/schemas/ErrorResponse.yaml
    '503':
      $ref: ../components/responses/KubernetesNotInstalledError.yaml
