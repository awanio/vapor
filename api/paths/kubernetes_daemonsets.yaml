get:
  summary: List all daemon sets in the cluster
  description: List all daemon sets across all namespaces in the Kubernetes cluster
  tags:
    - Kubernetes
  security:
    - bearerAuth: []
  responses:
    '200':
      description: Daemon sets listed successfully
      content:
        application/json:
          schema:
            $ref: ../components/schemas/DaemonSetsResponse.yaml
    '401':
      $ref: ../components/responses/UnauthorizedError.yaml
    '503':
      $ref: ../components/responses/KubernetesNotInstalledError.yaml

post:
  summary: Create or update a daemon set
  description: |
    Create or update a daemon set in the Kubernetes cluster using apply semantics.
    If the daemon set doesn't exist, it will be created. If it exists, it will be updated.
    
    Supports both JSON and YAML formats. If Content-Type is not specified, defaults to JSON.
  tags:
    - Kubernetes
  security:
    - bearerAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: ../components/schemas/DaemonSetDetail.yaml
        example:
          apiVersion: apps/v1
          kind: DaemonSet
          metadata:
            name: fluentd-elasticsearch
            namespace: kube-system
          spec:
            selector:
              matchLabels:
                name: fluentd-elasticsearch
            template:
              metadata:
                labels:
                  name: fluentd-elasticsearch
              spec:
                containers:
                - name: fluentd-elasticsearch
                  image: quay.io/fluentd_elasticsearch/fluentd:v2.5.2
      application/yaml:
        schema:
          type: string
        example: |
          apiVersion: apps/v1
          kind: DaemonSet
          metadata:
            name: fluentd-elasticsearch
            namespace: kube-system
          spec:
            selector:
              matchLabels:
                name: fluentd-elasticsearch
            template:
              metadata:
                labels:
                  name: fluentd-elasticsearch
              spec:
                containers:
                - name: fluentd-elasticsearch
                  image: quay.io/fluentd_elasticsearch/fluentd:v2.5.2
      text/yaml:
        schema:
          type: string
  responses:
    '200':
      description: Daemon set created or updated successfully
      content:
        application/json:
          schema:
            $ref: ../components/schemas/DaemonSetDetailResponse.yaml
    '400':
      description: Bad request - Invalid YAML/JSON format or missing required fields
      content:
        application/json:
          schema:
            $ref: ../components/schemas/ErrorResponse.yaml
          examples:
            invalidYaml:
              summary: Invalid YAML format
              value:
                status: error
                message: Failed to parse YAML
                details: 'yaml: line 5: found character that cannot start any token'
            invalidJson:
              summary: Invalid JSON format
              value:
                status: error
                message: Failed to parse JSON
                details: 'unexpected end of JSON input'
            unsupportedContentType:
              summary: Unsupported content type
              value:
                status: error
                message: Unsupported Content-Type
                details: "Content-Type must be 'application/json', 'application/yaml', or 'text/yaml'"
            missingField:
              summary: Missing required field
              value:
                status: error
                message: Validation error
                details: 'DaemonSet name is required in metadata.name'
    '401':
      $ref: ../components/responses/UnauthorizedError.yaml
    '503':
      $ref: ../components/responses/KubernetesNotInstalledError.yaml
