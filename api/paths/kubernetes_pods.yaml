get:
  summary: List all pods in the cluster
  description: List all pods across all namespaces in the Kubernetes cluster
  tags:
    - Kubernetes
  security:
    - bearerAuth: []
  responses:
    '200':
      description: Pods listed successfully
      content:
        application/json:
          schema:
            $ref: ../components/schemas/PodsResponse.yaml
    '401':
      $ref: ../components/responses/UnauthorizedError.yaml
    '503':
      $ref: ../components/responses/KubernetesNotInstalledError.yaml
post:
  summary: Create or update a pod
  description: |
    Create a new pod or update an existing pod using Kubernetes apply semantics.

    Supports both JSON and YAML content types:
    - For JSON: Set Content-Type to "application/json"
    - For YAML: Set Content-Type to "application/yaml" or "text/yaml"

    If no Content-Type is specified, JSON is assumed by default.
  tags:
    - Kubernetes
  security:
    - bearerAuth: []
  requestBody:
    required: true
    description: Pod specification in JSON or YAML format
    content:
      application/json:
        schema:
          $ref: ../components/schemas/PodDetail.yaml
        example:
          apiVersion: v1
          kind: Pod
          metadata:
            name: nginx-pod
            namespace: default
            labels:
              app: nginx
          spec:
            containers:
              - name: nginx
                image: nginx:latest
                ports:
                  - containerPort: 80
      application/yaml:
        schema:
          type: string
          description: Pod specification in YAML format
        example: |
          apiVersion: v1
          kind: Pod
          metadata:
            name: nginx-pod
            namespace: default
            labels:
              app: nginx
          spec:
            containers:
            - name: nginx
              image: nginx:latest
              ports:
              - containerPort: 80
      text/yaml:
        schema:
          type: string
          description: Pod specification in YAML format
        example: |
          apiVersion: v1
          kind: Pod
          metadata:
            name: nginx-pod
            namespace: default
            labels:
              app: nginx
          spec:
            containers:
            - name: nginx
              image: nginx:latest
              ports:
              - containerPort: 80
  responses:
    '200':
      description: Pod created or updated successfully
      content:
        application/json:
          schema:
            $ref: ../components/schemas/PodDetailResponse.yaml
    '400':
      description: Invalid pod specification or unsupported content type
      content:
        application/json:
          schema:
            $ref: ../components/schemas/ErrorResponse.yaml
          examples:
            invalidYaml:
              summary: Invalid YAML format
              value:
                status: error
                error:
                  code: INVALID_INPUT
                  message: Invalid YAML pod specification
                  details: 'yaml: line 5: found character that cannot start any token'
            invalidJson:
              summary: Invalid JSON format
              value:
                status: error
                error:
                  code: INVALID_INPUT
                  message: Invalid JSON pod specification
                  details: unexpected end of JSON input
            unsupportedContentType:
              summary: Unsupported content type
              value:
                status: error
                error:
                  code: INVALID_INPUT
                  message: Unsupported content type
                  details: >-
                    Content-Type must be 'application/json', 'application/yaml',
                    or 'text/yaml'
            missingName:
              summary: Missing required field
              value:
                status: error
                error:
                  code: INVALID_INPUT
                  message: Invalid pod specification
                  details: Pod name is required in metadata.name
    '401':
      $ref: ../components/responses/UnauthorizedError.yaml
    '503':
      $ref: ../components/responses/KubernetesNotInstalledError.yaml
